# Bookscan
BOOKSCAN_EMAIL=
BOOKSCAN_PASSWORD=
BOOKSCAN_TOTP_SECRET=
BOOKSCAN_BASE_URL=https://system.bookscan.co.jp
# 開発用: HTMLのファイルパス or 生HTML or http(s)URL（簡易デバッグ）
BOOKSCAN_DEBUG_HTML_PATH=
# Bookscan HTTPログイン（任意）
BOOKSCAN_LOGIN_URL=https://system.bookscan.co.jp/mypage/login.php
BOOKSCAN_LOGIN_EMAIL_FIELD=email
BOOKSCAN_LOGIN_PASSWORD_FIELD=password
BOOKSCAN_LOGIN_TOTP_FIELD=otp
# 一覧取得テンプレート（任意, {page}対応）
BOOKSCAN_LIST_URL_TEMPLATE=https://system.bookscan.co.jp/bookshelf_all_list.php
BOOKSCAN_LIST_MAX_PAGES=1
BOOKSCAN_LIST_STOP_ON_EMPTY=true

# Dropbox（簡易運用：固定アクセストークンを使用する場合）
DROPBOX_ACCESS_TOKEN=

# Dropbox（推奨：OAuth/Refresh Token運用）
DROPBOX_APP_KEY=
DROPBOX_APP_SECRET=
DROPBOX_REFRESH_TOKEN=
DROPBOX_TOKEN_ROTATE=true

# 同期先
DROPBOX_DEST_ROOT=/Apps/bookscan-sync

# 動作パラメータ
DOWNLOAD_DIR=.cache/downloads
STATE_BACKEND=json  # または sqlite
STATE_PATH=.state/state.json  # sqliteの場合は .state/state.db
SYNC_MODE=incremental  # incremental|full|dry-run
CONCURRENCY=1
RATE_LIMIT_QPS=0.5
# Service別QPS（未設定時はRATE_LIMIT_QPSを使用）
BOOKSCAN_RATE_LIMIT_QPS=
DROPBOX_RATE_LIMIT_QPS=
USER_AGENT=bookscan-dropbox-sync/0.1 (+https://github.com/iyoda/bookscan_dropbox_sync)
HEADLESS=true
HTTP_TIMEOUT=60
FAILURE_LOG_PATH=.logs/failures.jsonl
# Dropbox チャンクアップロード設定（M3）
DROPBOX_CHUNK_UPLOAD_THRESHOLD=8388608
DROPBOX_CHUNK_SIZE=8388608
# リトライ設定（M3）
RETRY_MAX_ATTEMPTS=3
RETRY_BACKOFF_MULTIPLIER=0.1
RETRY_BACKOFF_MAX=2.0
